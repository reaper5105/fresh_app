{% extends 'base.html' %}

{% block title %}‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞™‡±ã‡∞∏‡±ç‡∞ü‡±ç ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø (Create Post){% endblock %}

{% block content %}
<div class="bg-white p-8 rounded-2xl shadow-lg max-w-4xl mx-auto">
    <h2 class="text-3xl font-bold text-primary mb-2 telugu">‡∞Æ‡±Ä ‡∞∏‡∞Ç‡∞∏‡±ç‡∞ï‡±É‡∞§‡∞ø‡∞®‡∞ø ‡∞™‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</h2>
    <p class="text-gray-600 mb-6">Share Your Culture</p>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>{{ form.state.label_tag }} {{ form.state }}</div>
            <div>{{ form.category.label_tag }} {{ form.category }}</div>
        </div>

        <div class="mt-6">
            <label for="{{ form.text_content.id_for_label }}">{{ form.text_content.label }}</label>
            {{ form.text_content }}
            <span id="language-warning" class="text-red-500 text-sm mt-1 hidden">‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å‡∞≤‡±ã ‡∞Æ‡∞æ‡∞§‡±ç‡∞∞‡∞Æ‡±á ‡∞µ‡±ç‡∞∞‡∞æ‡∞Ø‡∞Ç‡∞°‡∞ø.</span>
            {% for error in form.text_content.errors %}<p class="text-red-500 text-sm mt-1">{{ error }}</p>{% endfor %}
        </div>

        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="border-2 border-dashed rounded-lg p-4 text-center">
                <label for="id_image_content" class="cursor-pointer">
                    <span class="text-2xl">üñºÔ∏è</span><br>
                    <span class="font-semibold text-secondary">Upload Image</span>
                    <input type="file" name="image_content" id="id_image_content" class="hidden">
                </label>
            </div>
            <div class="border-2 border-dashed rounded-lg p-4 text-center">
                <label for="id_video_content" class="cursor-pointer">
                    <span class="text-2xl">üé¨</span><br>
                    <span class="font-semibold text-secondary">Upload Video</span>
                    <input type="file" name="video_content" id="id_video_content" class="hidden">
                </label>
            </div>
            <div class="border-2 border-dashed rounded-lg p-4 text-center">
                 <label for="id_audio_content" class="cursor-pointer">
                    <span class="text-2xl">üéµ</span><br>
                    <span class="font-semibold text-secondary">Upload Audio</span>
                    <input type="file" name="audio_content" id="id_audio_content" class="hidden">
                </label>
            </div>
        </div>
        
        <div class="mt-8 text-center">
            <button type="submit" class="btn-primary w-full lg:w-1/2">
                <span class="telugu">‡∞∏‡∞Æ‡∞∞‡±ç‡∞™‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span> (Submit)
            </button>
        </div>
    </form>
</div>

<script>
    const textInput = document.getElementById('id_text_content');
    const warningSpan = document.getElementById('language-warning');
    const teluguRegex = /^[\u0C00-\u0C7F\s\d.,!?-]*$/;

    textInput.addEventListener('input', (e) => {
        if (textInput.value && !teluguRegex.test(textInput.value)) {
            warningSpan.classList.remove('hidden');
        } else {
            warningSpan.classList.add('hidden');
        }
    });
</script>
{% endblock %}
